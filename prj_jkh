一、	了解项目业务背景
需求目的：为XX招商分行，挖掘具有潜力办理金葵花卡的用户，有针对性的去做营销，提高金葵花卡高端用户数量。
办理金葵花卡的官方定义：招行金葵花卡属于高端客户卡，性质上属于借记卡的范畴。是招商银行面向个人账户内日均资产在50万以上的客户，发行的一类银行卡。
办理金葵花卡的好处及收费：如果招行金葵花卡的持有者账户中，日均余额少于50万，招行就会向持卡人收取250元/月的账户管理费。招行金葵花卡出了没有年费之外，还具有境内机场贵宾登机、免费800热线服务、个性卡号、专项理财推荐等等特色。
通过去招行XX分行的营业厅了解此业务时，得知实际办理情况为：办理金葵花卡无门槛条件，在3个月的体验期无需费用，但在第四个月要收帐户管理费。
与招行工作人员交流其当前的营销依据时，得知其办理金葵花卡的用户来源为：新客户主要是客户推荐、全员转介绍、高端信用卡、代发客户；老客户提升主要是理财客户、代发高管、小微贷款获客、三方存管大户。这两类客户中还主要是老客户提升，为3:1的比例。
二、	了解现场能拿到的客户原始数据
1、	客户基础信息表：用户的一些静态信息，比如年龄、学历、性别。
2、	核心交易表：用户的交易记录，比如在某天某月某时，有过一笔进帐或出帐且金额是多少。
3、	基金理财交易表：用户的基金、理财交易行为，涉及日期、金额及理财产品的等级相关信息。
4、	ATM交易表：用户在ATM上的交易数据，主要有日期、金额、ATM地点。
5、	资产明细表：用户不同资产的月日均统计值，涉及日期、金额、资产类型。
6、	POS消费表：用户在POS机上刷卡的记录，涉及日期、金额、消费产品类别。
从现场客户能拿到的仅是XX分行上述借记卡的交易数据(20110101---20140930)，无信用卡数据。
三、	选择算法模型
1、	从办理金葵花卡的官方定义来看，那此业务可以归为预测用户资产的回归问题（达到50万）。对这条路有想过用深圳招行的资产预测的方式去实现，当时此方案是由诺亚做的。所以在去XX之前，有先了解一下深招行资产预测的大体实现，其有客户在招行各分行的资产数据。
到XX招行分行后，得知仅有XX招行分行的单一数据，并没有其他分行的资产数据，所以按资产预测方式去建模行不通。
另一个思路，就是拿深圳招行已做好的模型直接拿来做预测。但此路又被封掉了，因为各分行之间存在竞争关系，不会随便转让成果。另外，现场我们也担心，即使用此模型做预测，那不同区域的人的消费行为会不一样，那模型可能也不太适用。
2、	基于上述数据分析，提出以分类算法来解决招行XX分行的挖掘具有潜力办理金葵花卡用户业务。
四、	正负样本选择
1、	数据分析理解：围绕金葵花卡的用户群，统计金葵花卡的开总用户数、关的总用户数，第一张招行卡为金葵花卡的用户数、且一直在用的用户数，用户第一张招行卡为金葵花卡里不再用金葵花卡的未销户的用户数、销户用户数，3个月内关金葵花卡的用户数，3-6个月内关卡的用户数、6-12月关卡的用户数，1年以上关卡的用户数。开金葵花卡前用户的月日均资产体现情况。
2、	正负样本选择：正样本选择的用户为持有金葵花卡大于等于4个月，且金葵花卡与普卡时间至少有3个月时间间隔（以保证有3个月的交易记录）。实际操作时，其key为clt_uid + trx_mon，其中trx_mon为用户办金葵花卡的前一个月；负样本的用户为未办理金葵花卡且办理普卡后一年内没有销卡的用户中随机抽取。实际操作时，其key为clt_uid + trx_mon，其中trx_mon为用户办普卡后的第12个月。
五、	最终方案确定
根据现场的数据分析，得出的算法模型及正负样本选择，组织深圳专家讨论会，最终确定以分类算法来达到区分有钱无钱之人，从而达到挖掘办理金葵花卡的潜在用户。
六、	特征生成
根据之前在深圳招行积累的经验，结合核心交易表（月交易 周交易 时段交易 交易码 帐户余额 币种）、基金理财（交易代码 币种 金额 风险等级）、POS消费（交易金额 刷卡地点）、ATM设备消费（周交易 时段交易 自助厅 金额）、资产明细（月日均），从“收入金额、次数”、“支出金额、次数”、“平均收入、支出”、“收入/支出比”维度去构造特征，以clt_uid + trx_mon为样本key，共构成624维。在特征生成过程中，有尝试增加邻近3个月、6个月、12个月的累计值构成特征，总计13500维。
七、	模型训练
1、	使用随机森林及LR算法，分别做了模型训练，同时在现场用weka工具也做了模型训练。
2、	训练样本及测试本样不区时间界线；训练样本及测试样本分界线。
3、	模型+模型
八、	模型效果评估
1、	分析混淆矩阵
a       b     <----- Classfied as
5029    1403  | 6432 a=y
528     5461  | 5989 b=n
详解：测试正例为6432，负例为5989个
模型测试结果：
模型判断为金葵花的样本为5557个，实际是金葵花的为5029个
查准率为90.50%，查全率为78.19%
九、	模型实用效果评估
当前正样本中不包括7/8月办金葵花的用户，且当前为12月的最新数据，从而可从7/8两月办理金葵花的用户中选出稳定的金葵花用户；然后用201406月的数据去预测成为金葵花的用户，分析其与7/8月办金葵花稳定客户的吻合情况；比如201406_predict_result是预测结果，然后分析在结果中的56000个里面，有多少是在7/8月的。
输入数据：856535
400棵树----> 166564  0.99可能性的为41168
2000     138/881 = 0.15
6000     291/881=0.33
56000    617/881=0.70
         768/881 = 0.87
十、	名单输出+标签
信息增益信息改进：内容在原有的基础上，还输出分裂区间的值及此区间中正负样本的落入情况(落入此区间的正样本占总正样本的比值，负样本类似算），如下体现：
sum_max_n_trx_bal 0.40344906  (-Infinity~34832.15）：label_y=0.28 label_n=0.95;【34832.15~Infinity）：label_y=0.72 label_n=0.05
用户名单+属性（按信息增益排序）。
用户标签：做为客户营销的切入点，表明客户具有什么样的特点。
